"use strict";(self["webpackChunktemplate_project"]=self["webpackChunktemplate_project"]||[]).push([[9548],{7027:function(e,r){r["Z"]=["Password must contains one number ","Password must contains one big symbol","Password must contains one special symbol","Password must contains six or more symbol"]},5265:function(e,r){r["Z"]=(e=/^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})./)=>r=>e.test(r)},8587:function(e,r,s){s.d(r,{Z:function(){return t}});var o=s(9373);const a=/\d{11}/;function t(e){return!o.BM.req(e)||a.test(e.replace(/\D/g,""))}},9548:function(e,r,s){s.r(r),s.d(r,{default:function(){return z}});var o=s(821);const a={class:"flex flex-col items-center w-full"};function t(e,r,s,t,n,i){const l=(0,o.up)("zTabsNav"),m=(0,o.up)("zSpacer"),d=(0,o.up)("zDialog");return(0,o.wg)(),(0,o.j4)(d,{class:"w-11/12 px-9 py-7 sm:w-8/12 md:w-2/4 max-w-sm md:max-w-lg"},{header:(0,o.w5)((()=>[(0,o.Wm)(l,{modelValue:n.selectedTab,"onUpdate:modelValue":r[0]||(r[0]=e=>n.selectedTab=e),tabs:n.authTabs,"indicator-movement":""},null,8,["modelValue","tabs"])])),default:(0,o.w5)((()=>[(0,o.Wm)(m,{space:"8"}),(0,o._)("div",a,[((0,o.wg)(),(0,o.j4)(o.Ob,null,[((0,o.wg)(),(0,o.j4)((0,o.LL)(i.currentFormName)))],1024))])])),_:1})}var n=s(2799);const i={class:"form-field flex justify-between flex-col sm:flex-row sm:items-center"},l=(0,o.Uk)(" Forget password? "),m={class:"form-actions"},d=(0,o.Uk)(" Log in ");function u(e,r,s,a,t,n){const u=(0,o.up)("zInput"),c=(0,o.up)("zCheckboxSingle"),f=(0,o.up)("zLink"),g=(0,o.up)("zLoaderButton"),p=(0,o.up)("zForm"),w=(0,o.Q2)("autofocus");return(0,o.wg)(),(0,o.j4)(p,{state:t.form.state,"error-message":t.form.errorMessage,"success-message":t.form.successMessage,"vuelidate-object":a.v$,onValidate:n.logIn},{actions:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(g,{class:"form-button",type:"submit",loader:t.form.loading},{default:(0,o.w5)((()=>[d])),_:1},8,["loader"])])])),default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(u,{modelValue:t.logInForm.email,"onUpdate:modelValue":r[0]||(r[0]=e=>t.logInForm.email=e),modelModifiers:{trim:!0},class:"form-field",label:"Email","error-state":a.v$.logInForm.email.$error,"on-error":"Incorrect email format"},null,8,["modelValue","error-state"]),[[w]]),(0,o.Wm)(u,{modelValue:t.logInForm.password,"onUpdate:modelValue":r[1]||(r[1]=e=>t.logInForm.password=e),modelModifiers:{trim:!0},class:"form-field",type:"password",label:"Password","error-state":a.v$.logInForm.password.$error,"on-error":"Input correct password"},null,8,["modelValue","error-state"]),(0,o._)("div",i,[(0,o.Wm)(c,{modelValue:t.rememberMe,"onUpdate:modelValue":r[2]||(r[2]=e=>t.rememberMe=e),class:"mb-2 sm:mb-0",label:"Remember me"},null,8,["modelValue"]),(0,o.Wm)(f,{onClick:r[3]||(r[3]=r=>e.dialog$.show("resetPassword"))},{default:(0,o.w5)((()=>[l])),_:1})])])),_:1},8,["state","error-message","success-message","vuelidate-object","onValidate"])}var c=s(2416),f=s(9373),g=s(5265);function p(){return{logInForm:{email:{email:f.Do,required:f.C1},password:{password:(0,g.Z)(),required:f.C1}}}}var w=s(3907),h=s(4055),b={name:"LogInForm",setup(){return{v$:(0,c.ZP)()}},data(){return{rememberMe:!0,logInForm:{email:"",password:""},form:{state:null,errorMessage:"",successMessage:"",loading:!1}}},methods:{...(0,w.nv)({storeLogIn:"auth/logIn"}),async logIn(e){if(this.form.state=null,e===STATUS_WORDS.ERROR)return;this.form.loading=!0;const r=await this.$store.dispatch("auth/logIn",{...this.logInForm});r.success?((0,h.SY)(r.data.tokens.refresh,this.rememberMe),this.dialog$.hide("auth")):(this.form.loading=!1,this.form.state=!1,this.form.errorMessage=r.data.errors[0].message)}},validations:p()},I=s(3744);const F=(0,I.Z)(b,[["render",u]]);var V=F;const v={class:"form-actions flex flex-col justify-center lg:justify-start"},k=(0,o.Uk)(" Resend Verification Link "),y=(0,o.Uk)(" Sign In ");function $(e,r,s,a,t,n){const i=(0,o.up)("zInput"),l=(0,o.up)("zTooltipInput"),m=(0,o.up)("zCheckboxSingle"),d=(0,o.up)("zLink"),u=(0,o.up)("zLoaderButton"),c=(0,o.up)("zForm"),f=(0,o.Q2)("autofocus");return(0,o.wg)(),(0,o.j4)(c,{state:t.form.state,"error-message":t.form.errorMessage,"success-message":t.form.successMessage,"vuelidate-object":a.v$,onValidate:n.signIn},{actions:(0,o.w5)((()=>[(0,o._)("div",v,[n.isFormSuccessed?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"form-link",disabled:t.resendVerificationDisabled,onClick:n.sendVerificationLink},{default:(0,o.w5)((()=>[k])),_:1},8,["disabled","onClick"])):(0,o.kq)("",!0),(0,o.Wm)(u,{class:"form-button",type:"submit",loader:t.form.loading},{default:(0,o.w5)((()=>[y])),_:1},8,["loader"])])])),default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(i,{modelValue:t.signInForm.email,"onUpdate:modelValue":r[0]||(r[0]=e=>t.signInForm.email=e),class:"form-field",label:"Email","error-state":a.v$.signInForm.email.$error,"on-error":"Incorrect email format"},null,8,["modelValue","error-state"]),[[f]]),(0,o.Wm)(l,{modelValue:t.signInForm.password,"onUpdate:modelValue":r[1]||(r[1]=e=>t.signInForm.password=e),modelModifiers:{trim:!0},class:"form-field",type:"password",label:"Password","error-state":a.v$.signInForm.password.$error,"on-error":"Password does not match to requirements","password-requirements":t.passwordRequirements},null,8,["modelValue","error-state","password-requirements"]),(0,o.Wm)(i,{modelValue:t.signInForm.passwordConfirmation,"onUpdate:modelValue":r[2]||(r[2]=e=>t.signInForm.passwordConfirmation=e),modelModifiers:{trim:!0},class:"form-field",type:"password",label:"Repeat password","error-state":a.v$.signInForm.passwordConfirmation.$error,"on-error":"The passwords are different"},null,8,["modelValue","error-state"]),(0,o.Wm)(i,{modelValue:t.signInForm.phoneNumber,"onUpdate:modelValue":r[3]||(r[3]=e=>t.signInForm.phoneNumber=e),modelModifiers:{trim:!0},class:"form-field",label:"Phone number",mask:"+9 (999) 999 99-99","error-state":a.v$.signInForm.phoneNumber.$error,"on-error":"Invalid phone number"},null,8,["modelValue","error-state"]),(0,o.Wm)(m,{modelValue:t.signInForm.policyAgreement,"onUpdate:modelValue":r[4]||(r[4]=e=>t.signInForm.policyAgreement=e),class:"form-field","error-state":a.v$.signInForm.policyAgreement.$error,label:"Consent to the processing of personal data"},null,8,["modelValue","error-state"])])),_:1},8,["state","error-message","success-message","vuelidate-object","onValidate"])}var C=s(8587);function M(){return{signInForm:{email:{required:f.C1,email:f.Do},password:{required:f.C1,password:(0,g.Z)()},passwordConfirmation:{required:f.C1,sameAsPassword:(0,f.sH)(this.signInForm.password)},phoneNumber:{required:f.C1,phone:C.Z},policyAgreement:{isTrue:e=>e}}}}var R=s(7027),L={name:"SignInForm",setup(){return{v$:(0,c.ZP)()}},data(){return{passwordRequirements:R.Z,signInForm:{email:"",password:"",passwordConfirmation:"",phoneNumber:"",policyAgreement:!1},form:{state:null,errorMessage:"",successMessage:"",loading:!1},resendVerificationDisabled:!1}},computed:{isFormSuccessed(){return this.form.state}},watch:{"signInForm.email":function(e,r){this.form.state=null}},methods:{async signIn(e){if(this.form.state=null,e===STATUS_WORDS.ERROR)return;this.form.loading=!0;const r=this.getFormatedToBackendData(this.signInForm);(0,h.o$)(r,"policyAgreement");const s=await this.$store.dispatch("auth/outSignIn",r);this.form.loading=!1,s.success?(this.form.successMessage=s.data.message,this.form.state=!0):(this.form.errorMessage=s.data.errors[0].message,this.form.state=!1)},getFormatedToBackendData(e){const r=Object.assign({},e);return r.phoneNumber="+"+r.phoneNumber.replace(/\D/g,""),r.redirectUrl=REDIRECT_URLS.VERIFICATE_EMAIL,r},async sendVerificationLink(){const e={email:this.signInForm.email,redirectUrl:REDIRECT_URLS.VERIFICATE_EMAIL};this.resendVerificationDisabled=!0,await this.$store.dispatch("auth/resendVerificationLink",e),this.toast$.success({summary:"Successfully sent!",detail:"A verification link was sent on your e-mail. \nYou can resend link in 15 seconds."}),this.enableResendLink(15e3)},enableResendLink(e){setTimeout((()=>{this.resendVerificationDisabled=!1}),e)}},validations:M};const T=(0,I.Z)(L,[["render",$]]);var S=T,U={name:"AuthDialog",components:{zDialog:n.Z,SignInForm:S,LogInForm:V},data(){return{selectedTab:"Log In",authTabs:["Log In","Sign In"]}},computed:{currentFormName(){return this.selectedTab.replace(" ","")+"Form"}}};const _=(0,I.Z)(U,[["render",t]]);var z=_}}]);