"use strict";(self["webpackChunktemplate_project"]=self["webpackChunktemplate_project"]||[]).push([[154],{6968:function(e,t,r){r.d(t,{Z:function(){return m}});var a=r(821);const s={class:(0,a.C_)(["inline-flex items-center space-x-4"])},o=(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},[(0,a._)("path",{fill:"currentColor",d:"M18 28v-2a10 10 0 0 0 10-10h2a12 12 0 0 1-12 12Z"}),(0,a._)("path",{fill:"currentColor",d:"M18 23v-2a5 5 0 0 0 5-5h2a7 7 0 0 1-7 7Z"}),(0,a._)("path",{fill:"currentColor",d:"M27 11h-6V7a3 3 0 0 0-3-3h-6a3 3 0 0 0-3 3v4H3a1 1 0 0 0-1 1.15L3.88 24.3a2 2 0 0 0 2 1.7H15v-2H5.86L4.17 13H27ZM11 7a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v4h-8Z"})],-1);function d(e,t,r,d,i,n){const l=(0,a.up)("zButton"),u=(0,a.Q2)("tooltip");return(0,a.wg)(),(0,a.iD)("h5",s,[1===r.statusValue&&r.showCheckoutBtn?(0,a.wy)(((0,a.wg)(),(0,a.j4)(l,{key:0,variant:"safety",class:"p-1",onClick:n.openCheckoutDialog},{default:(0,a.w5)((()=>[o])),_:1},8,["onClick"])),[[u,"Checkout order",void 0,{left:!0}]]):(0,a.kq)("",!0),(0,a._)("span",{class:(0,a.C_)(["text-lg sm:font-semibold",n.statusClasses])},(0,a.zw)(n.status.label),3)])}var i={"Not confirmed":"text-placeholder","Awaiting payment":"text-danger","In the work":"text-primary","Is made":"text-secondary",Sent:"text-safety"},n=r(5708),l={name:"ZShopOrderStatus",components:{zButton:n.Z},props:{statusValue:{type:Number,required:!0},bindedCartItems:{type:Array,required:!0},orderId:{type:Number,required:!0},userId:{type:Number,required:!0},showCheckoutBtn:{type:Boolean,default:!1}},computed:{statuses(){return this.$store.getters["order/orderStatusTypes"]},status(){return this.statuses.find((e=>e.value===this.statusValue))},statusClasses(){return i[this.status.label]}},methods:{openCheckoutDialog(){this.dialog$.show("checkoutOrder",{bindedCartItems:this.bindedCartItems,orderId:this.orderId,userId:this.userId})}}},u=r(3744);const c=(0,u.Z)(l,[["render",d]]);var m=c},154:function(e,t,r){r.r(t),r.d(t,{default:function(){return fe}});var a=r(821);const s={key:0,class:"w-full h-full"},o={key:1,class:"shop-main_padding flex-col"},d={class:"flex justify-between items-center flex-wrap"},i={class:"font-mono mr-5 leading-tight"};function n(e,t,r,n,l,u){const c=(0,a.up)("zLoader"),m=(0,a.up)("zOrderStatus"),p=(0,a.up)("zDivider"),h=(0,a.up)("OrderProducts"),f=(0,a.up)("Section"),g=(0,a.up)("OrderSummary"),w=(0,a.up)("OrdererDetails");return l.loader?((0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(c,{size:"200px",background:"",title:""})])):((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("header",d,[(0,a._)("h4",i," № "+(0,a.zw)(l.order.data.id),1),(0,a.Wm)(m,{"show-checkout-btn":"","binded-cart-items":u.bindedCartItems,"order-id":l.order.data.id,"user-id":l.order.data.user,"status-value":l.order.data.orderStatus},null,8,["binded-cart-items","order-id","user-id","status-value"])]),(0,a.Wm)(p,{class:"my-3"}),(0,a.Wm)(f,{title:"Order products:"},{default:(0,a.w5)((()=>[(0,a.Wm)(h)])),_:1}),(0,a.Wm)(p,{class:"my-3"}),(0,a.Wm)(f,{title:"Order summary:"},{default:(0,a.w5)((()=>[(0,a.Wm)(g)])),_:1}),(0,a.Wm)(p,{class:"my-3"}),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w)])),_:1})]))}r(6699);var l=r(6968);const u={key:0,class:"mb-3"};function c(e,t,r,s,o,d){return(0,a.wg)(),(0,a.iD)("section",null,[r.title?((0,a.wg)(),(0,a.iD)("h4",u,(0,a.zw)(r.title),1)):(0,a.kq)("",!0),(0,a.WI)(e.$slots,"default")])}var m={name:"OrderDetailSection",props:{title:{type:String,default:""}}},p=r(3744);const h=(0,p.Z)(m,[["render",c]]);var f=h;function g(e,t,r,s,o,d){const i=(0,a.up)("zMediaWithTitle"),n=(0,a.up)("zTape"),l=(0,a.up)("ProductDialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(n,(0,a.dG)(e.$attrs,{scrollable:""}),{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.bindedOrderItems,(e=>((0,a.wg)(),(0,a.j4)(i,{key:e.orderItem.id,class:"h-36 whitespace-normal flex-shrink-0 mr-4 last:mr-0",original:d.getProductMedia(e),title:d.getProductTitle(e),"disable-overlay":"",onClick:t=>d.showProductDetail(e)},null,8,["original","title","onClick"])))),128))])),_:1},16),o.productDialog.visible?((0,a.wg)(),(0,a.j4)(l,{key:0,visible:o.productDialog.visible,"onUpdate:visible":t[0]||(t[0]=e=>o.productDialog.visible=e),"binded-order-item":o.productDialog.bindedOrderItem},null,8,["visible","binded-order-item"])):(0,a.kq)("",!0)],64)}const w={class:"font-semibold"},D={class:"flex"},b={class:"flex flex-col w-2/4 flex-shrink-0"};function v(e,t,r,s,o,d){const i=(0,a.up)("zMedia"),n=(0,a.up)("zDialogNonLayoutWrapper");return(0,a.wg)(),(0,a.j4)(n,{class:"product-dialog__window w-screen max-w-md",position:"bottom"},{title:(0,a.w5)((()=>[(0,a._)("h4",w,(0,a.zw)(r.bindedOrderItem.product.title),1)])),default:(0,a.w5)((()=>[(0,a._)("div",D,[(0,a.Wm)(i,{class:"mr-3 flex-grow",original:d.mediaSrc,onClick:d.goToProductDetails},null,8,["original","onClick"]),(0,a._)("div",b,[(0,a._)("h5",null,[(0,a._)("strong",null,(0,a.zw)(d.priceString),1)]),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.features,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.feature},[(0,a._)("em",null,(0,a.zw)(e.feature),1),(0,a.Uk)(": "+(0,a.zw)(e.value)+", ",1)])))),128))])])])])),_:1})}var y={name:"ProductDialog",props:{bindedOrderItem:{type:[Object,null],required:!0}},computed:{priceString(){return"$"+this.bindedOrderItem.orderItem.price},mediaSrc(){return this.bindedOrderItem.product.media[0].display},features(){return this.$store.getters["product/getFeaturesAndFields"](this.bindedOrderItem.orderItem.featureFields)}},methods:{goToProductDetails(){this.$router.push({name:"ShopProductPage",params:{productId:this.product.id}})}}};const I=(0,p.Z)(y,[["render",v]]);var _=I,O={name:"OrderProducts",components:{ProductDialog:_},inject:["orderData","orderProducts"],inheritAttrs:!1,data(){return{productDialog:{visible:!1,bindedOrderItem:null},TEMPLATE_IMG:TEMPLATE_IMG}},computed:{bindedOrderItems(){const e=[];if(this.orderData.orderItems)for(const t of this.orderData.orderItems){const r={orderItem:t,product:null};r.product=this.orderProducts.find((e=>e.id===t.product))||null,e.push(r)}return e}},methods:{getProductMedia(e){return null!==e.product?e.product.media[0].display:this.TEMPLATE_IMG},getProductTitle(e){return null!==e.product?e.product.title:"Product was deleted"},showProductDetail(e){this.productDialog.visible=!0,this.productDialog.bindedOrderItem=e},hideProductDetail(){this.productDialog.visibile=!1,this.productDialog.bindedOrderItem=null}}};const k=(0,p.Z)(O,[["render",g]]);var P=k;const S={class:"mb-1.5"},z=(0,a._)("em",null,"Ordered Date: ",-1),C=(0,a.Uk)(),W={class:"font-mono"},x={class:"mb-1.5"},M=(0,a._)("em",null," Payment Date: ",-1),F=(0,a.Uk)(),$={class:"font-mono"},Z=(0,a._)("em",null," Paid: ",-1),T=(0,a.Uk)(),j={class:"font-mono"};function q(e,t,r,s,o,d){return(0,a.wg)(),(0,a.iD)("ul",null,[(0,a._)("li",S,[z,C,(0,a._)("span",W,(0,a.zw)(d.formatDate(d.orderData.orderedDate)),1)]),(0,a._)("li",x,[M,F,(0,a._)("span",$,(0,a.zw)(d.orderData.paymentDate||"30.04.2022, 22:58:33"),1)]),(0,a._)("li",null,[Z,T,(0,a._)("span",j," $"+(0,a.zw)(d.paidAmount),1)])])}var A={name:"OrdererSummary",inject:["orderData","orderProducts"],computed:{paidAmount(){return this.orderProducts.reduce(((e,t)=>e+parseFloat(t.price)),0)}},methods:{formatDate(e){return e?new Intl.DateTimeFormat("AE",{dateStyle:"short",timeStyle:"medium"}).format(new Date(e)):""}}};const N=(0,p.Z)(A,[["render",q]]);var Y=N;function H(e,t,r,s,o,d){const i=(0,a.up)("zTabsNav");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(i,{modelValue:o.activeTab,"onUpdate:modelValue":t[0]||(t[0]=e=>o.activeTab=e),class:"w-3/4 max-w-xs mx-auto mb-5",tabs:o.tabs},null,8,["modelValue","tabs"]),((0,a.wg)(),(0,a.j4)((0,a.LL)(d.activeComponentName)))])}var L=["You","Measures"];function E(e,t,r,s,o,d){const i=(0,a.up)("OrderDetailsMeasuresSection");return(0,a.wg)(),(0,a.iD)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.measureGroups,(e=>((0,a.wg)(),(0,a.j4)(i,{key:e.id,name:e.name,"measure-fields":e.measureFields},null,8,["name","measure-fields"])))),128))])}const B={class:"mb-5 pb-2"},G={class:"underline mb-2.5"};function U(e,t,r,s,o,d){return(0,a.wg)(),(0,a.iD)("section",B,[(0,a._)("h4",G,(0,a.zw)(r.name),1),(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.measureFieldsWithName,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.measureField.measureField,class:"mb-1"},[(0,a._)("b",null,(0,a.zw)(e.name)+": ",1),(0,a._)("i",null,(0,a.zw)(e.measureField.value),1)])))),128))])])}var V={name:"OrderDetailsMeasuresSection",props:{name:{type:String,required:!0},measureFields:{type:Array,required:!0}},computed:{measureFieldsWithName(){const e=this.$store.getters["measure/measureFieldWithName"],t=e=>e.measureField;return this.measureFields.map((r=>e(r,t)))}}};const K=(0,p.Z)(V,[["render",U]]);var Q=K,J={name:"OrdererDetailsMeasures",components:{OrderDetailsMeasuresSection:Q},inject:["orderMeasures"],computed:{measureGroups(){return this.$store.getters["measure/groupMeasureFields"](this.orderMeasures,(e=>e.measureField))}}};const R=(0,p.Z)(J,[["render",E]]);var X=R;function ee(e,t,r,s,o,d){const i=(0,a.up)("OrdererDetailsYouSubsection");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(i,{title:"General Info:",info:d.generalInfo},null,8,["info"]),(0,a.Wm)(i,{title:"Delivery Info:",info:d.deliveryInfo},null,8,["info"]),(0,a.Wm)(i,{title:"Physical Info:",info:d.physicalInfo},null,8,["info"])])}const te={class:"mb-5"},re={class:"mb-1 underline"};function ae(e,t,r,s,o,d){return(0,a.wg)(),(0,a.iD)("div",te,[(0,a._)("h5",re,(0,a.zw)(r.title),1),(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.info,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.label,class:"mb-2 last:mb-0"},[(0,a._)("strong",null,(0,a.zw)(e.label)+": ",1),(0,a.Uk)(" "+(0,a.zw)(e.value),1)])))),128)),(0,a.WI)(e.$slots,"sectionListEnd")])])}var se={name:"DetailsYouSubsection",props:{title:{type:String,required:!0},info:{tiype:Array,required:!0}}};const oe=(0,p.Z)(se,[["render",ae]]);var de=oe,ie={name:"OrdererDetailsYou",components:{OrdererDetailsYouSubsection:de},inject:["orderData"],computed:{contactServices(){const e=[{name:"whatsapp",value:"whatsapp_name"},{name:"zoom",value:"zoomname"}];return this.formatServices(e)},generalInfo(){return[{label:"email",value:this.orderData.email},{label:"Phone number",value:this.orderData.phoneNumber}]},deliveryInfo(){return[{label:"Address",value:this.address},{label:"Zipcode",value:this.orderData.zipCode}]},address(){const e="$_there is state_$",t=`${this.orderData.country}, ${e}${this.orderData.city}, ${this.orderData.street}`,r=null===this.orderData.state?"":`${this.orderData.state}, `;return t.replace(e,r)},physicalInfo(){return[{label:"Height",value:this.orderData.height},{label:"Weight",value:this.orderData.weight}]}},methods:{formatServices(e){return e.reduce(((e,t)=>{const r={label:t.name,value:t.value};return e.push(r),e}),[])}}};const ne=(0,p.Z)(ie,[["render",ee]]);var le=ne,ue={name:"OrderData",components:{OrdererDetailsMeasures:X,OrdererDetailsYou:le},data(){return{tabs:L,activeTab:L[0]}},computed:{activeComponentName(){return"OrdererDetails"+this.activeTab}}};const ce=(0,p.Z)(ue,[["render",H]]);var me=ce,pe={name:"ProfileOrderDetail",components:{zOrderStatus:l.Z,Section:f,OrderProducts:P,OrderSummary:Y,OrdererDetails:me},provide(){return{orderData:(0,a.Fl)((()=>this.order.data)),orderProducts:(0,a.Fl)((()=>this.order.products)),orderMeasures:(0,a.Fl)((()=>this.order.data.measures||[]))}},props:{orderId:{type:String,required:!0}},data(){return{order:{data:{},products:[]},loader:!0}},computed:{orderProductIds(){const e=[];for(const t of this.order.data.orderItems)t.product&&!e.includes(t.product)&&e.push(t.product);return e},bindedCartItems(){if(!this.loader){const e=this.order.data.orderItems,t=this.order.products;return e.map((e=>({cartItem:e,product:t.find((t=>t.id===e.product))})))}return[]}},created(){this.fetchOrder()},methods:{async fetchOrder(){const e=await this.$store.dispatch("order/outFetchOrderById",this.orderId);this.order.data=e,await this.fetchOrderProducts(),this.loader=!1},async fetchOrderProducts(){await this.$store.dispatch("cart/products/loadProducts",this.orderProductIds);const e=this.$store.getters["cart/products/buffer"];this.order.products=e.filter((e=>this.orderProductIds.includes(e.id)))}}};const he=(0,p.Z)(pe,[["render",n],["__scopeId","data-v-d13ea058"]]);var fe=he}}]);