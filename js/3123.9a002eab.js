"use strict";(self["webpackChunktemplate_project"]=self["webpackChunktemplate_project"]||[]).push([[3123],{1733:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(821);const i={class:"relative flex items-center justify-center"},o={ref:"buttonContainer"};function s(e,t,r,s,a,d){const c=(0,n.up)("zLoader");return(0,n.wg)(),(0,n.iD)("div",i,[a.loading?((0,n.wg)(),(0,n.j4)(c,{key:0,size:"256px"})):(0,n.kq)("",!0),(0,n._)("div",o,null,512)])}var a=r(7889);const d="Af9CU4RWk4jdSTjXqjs9uMQFkQrdiNJ6lQQIPcEhZ9-ln3hYyiKpWSeqU9QSbMfJlwsGFwLp41V4v7oz";var c={name:"PaypalPayment",components:{zLoader:a["default"]},props:{bindedCartItems:{type:Array,required:!0},orderId:{type:Number,required:!0},userId:{type:Number,required:!0}},emits:["section-complete"],data(){return{loading:!0}},computed:{purchaseUnits(){return this.bindedCartItems.map((e=>({custom_id:this.orderId,reference_id:e.product.id,description:e.product.title.slice(25),amount:{currency_code:"USD",value:e.cartItem.price}})))}},async mounted(){await this.insertScript(),this.loading=!1,window.paypal.Buttons({createOrder:(e,t)=>t.order.create({purchase_units:this.purchaseUnits}),onApprove:async(e,t)=>{const r=await t.order.capture();if("COMPLETED"===r.status){const e=this.getToastDetails(this.userId);this.toast$.success({summary:`Order #${this.orderId} created`,detail:e,life:15e3}),this.$emit("section-complete",{sectionName:this.$options.name})}else this.toast$.error({summary:"An error occurred while transiting",detail:"",life:15e3})}}).render(this.$refs.buttonContainer)},methods:{insertScript(){const e=document.createElement("script");e.src=`https://www.paypal.com/sdk/js?client-id=${d}&currency=USD&components=buttons`;let t=null;return e.onload=()=>t(),document.body.append(e),new Promise((e=>t=e))},getToastDetails(){const e="Administrator soon will contact with you.<br>",t=null!==this.userId?"You can explore details in your profile.":"Unfortunately, you can't explore order detail.";return e+t}}},u=r(3744);const l=(0,u.Z)(c,[["render",s]]);var p=l},3123:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var n=r(821);const i=(0,n._)("h4",null,"Confirmation link",-1),o=(0,n._)("div",{class:"my-16"},null,-1);function s(e,t,r,s,a,d){const c=(0,n.up)("PaypalPayment"),u=(0,n.up)("zDialog");return(0,n.wg)(),(0,n.j4)(u,{class:"verification-dialog w-11/12 sm:w-8/12 md:w-2/4 max-w-md"},{header:(0,n.w5)((()=>[i])),default:(0,n.w5)((()=>[o,(0,n.Wm)(c,{"binded-cart-items":r.bindedCartItems,"order-id":r.orderId,"user-id":r.userId,onSectionComplete:d.closeDialog},null,8,["binded-cart-items","order-id","user-id","onSectionComplete"])])),_:1})}var a=r(2799),d=r(1733),c={name:"CheckoutOrderDialog",components:{zDialog:a.Z,PaypalPayment:d.Z},props:{bindedCartItems:{type:Array,required:!0},orderId:{type:Number,required:!0},userId:{type:Number,required:!0}},methods:{closeDialog(){this.dialog$.hide("checkoutOrder")}}},u=r(3744);const l=(0,u.Z)(c,[["render",s]]);var p=l}}]);