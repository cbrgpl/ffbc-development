"use strict";(self["webpackChunktemplate_project"]=self["webpackChunktemplate_project"]||[]).push([[6375],{1352:function(e,t,r){r.d(t,{s:function(){return x}});var s=r(3781),i=r(714);r(1703);function a(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var o=r(9371);function l(e,t,r){var s=(0,o.Z)(e,t,"set");return a(e,s,r),r}var d=r(9614),n=r(8829),c=r(821),u=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakSet;class v{constructor(){(0,s.Z)(this,f),(0,i.Z)(this,u,{writable:!0,value:(0,c.qj)([])}),(0,i.Z)(this,h,{writable:!0,value:(0,c.qj)({})}),(0,i.Z)(this,p,{writable:!0,value:(0,c.YP)((0,n.Z)(this,u),(e=>(0,d.Z)(this,f,m).call(this,e)))})}addObservable(e){(0,n.Z)(this,h)[e]=!1}addIntersections(e){e.forEach((e=>(0,n.Z)(this,u).push(e)))}resetState(){Object.keys((0,n.Z)(this,h)).forEach((e=>delete(0,n.Z)(this,h)[e])),(0,n.Z)(this,u).splice(0)}get schema(){return(0,n.Z)(this,h)}}function m(e){for(const t of e)(0,n.Z)(this,h)[t]=!0}var w=new WeakMap;class b{constructor(e,t){(0,i.Z)(this,w,{writable:!0,value:null}),l(this,w,new IntersectionObserver(t,e))}observe(e){for(const t of e)(0,n.Z)(this,w).observe(t)}unobserve(e){for(const t of e)(0,n.Z)(this,w).unobserve(t)}}var g=r(2482);class y{constructor(e){(0,g.Z)(this,"nodeBuffer",[]),this.addObservable=e}clearNodeBuffer(){this.nodeBuffer.splice(0)}get vueDirective(){return{created:(e,t)=>{e.setAttribute(`data-${y.OBSERVABLE_ATTR}`,t.value),this.nodeBuffer.push(e),this.addObservable(t.value)}}}}(0,g.Z)(y,"OBSERVABLE_ATTR","observable");var Z=new WeakMap,k=new WeakMap,O=new WeakMap,C=new WeakSet;class x{constructor(){(0,s.Z)(this,C),(0,i.Z)(this,Z,{writable:!0,value:null}),(0,i.Z)(this,k,{writable:!0,value:new v}),(0,i.Z)(this,O,{writable:!0,value:new y(((...e)=>(0,n.Z)(this,k).addObservable(...e)))})}init(e=null,t="0px 0px 0px 0px",r=0){const s={root:e,rootMargin:t,threshold:r},i=(...e)=>(0,d.Z)(this,C,B).call(this,...e);l(this,Z,new b(s,i))}observe(){const e=(0,n.Z)(this,O).nodeBuffer;(0,n.Z)(this,Z).observe(e)}unobserve(){const e=(0,n.Z)(this,O).nodeBuffer;(0,n.Z)(this,Z).unobserve(e),(0,n.Z)(this,k).resetState(),(0,n.Z)(this,O).clearNodeBuffer()}get schema(){return(0,n.Z)(this,k).schema}get directive(){return(0,n.Z)(this,O).vueDirective}get inited(){return null!==(0,n.Z)(this,Z)}}function B(e){const t=y.OBSERVABLE_ATTR,r=e.filter((e=>e.isIntersecting)).map((e=>e.target.dataset[t]));(0,n.Z)(this,k).addIntersections(r)}},6968:function(e,t,r){r.d(t,{Z:function(){return h}});var s=r(821);const i={class:(0,s.C_)(["inline-flex items-center space-x-4"])},a=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},[(0,s._)("path",{fill:"currentColor",d:"M18 28v-2a10 10 0 0 0 10-10h2a12 12 0 0 1-12 12Z"}),(0,s._)("path",{fill:"currentColor",d:"M18 23v-2a5 5 0 0 0 5-5h2a7 7 0 0 1-7 7Z"}),(0,s._)("path",{fill:"currentColor",d:"M27 11h-6V7a3 3 0 0 0-3-3h-6a3 3 0 0 0-3 3v4H3a1 1 0 0 0-1 1.15L3.88 24.3a2 2 0 0 0 2 1.7H15v-2H5.86L4.17 13H27ZM11 7a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v4h-8Z"})],-1);function o(e,t,r,o,l,d){const n=(0,s.up)("zButton"),c=(0,s.Q2)("tooltip");return(0,s.wg)(),(0,s.iD)("h5",i,[1===r.statusValue&&r.showCheckoutBtn?(0,s.wy)(((0,s.wg)(),(0,s.j4)(n,{key:0,variant:"safety",class:"p-1",onClick:d.openCheckoutDialog},{default:(0,s.w5)((()=>[a])),_:1},8,["onClick"])),[[c,"Checkout order",void 0,{left:!0}]]):(0,s.kq)("",!0),(0,s._)("span",{class:(0,s.C_)(["text-lg sm:font-semibold",d.statusClasses])},(0,s.zw)(d.status.label),3)])}var l={"Not confirmed":"text-placeholder","Awaiting payment":"text-danger","In the work":"text-primary","Is made":"text-secondary",Sent:"text-safety"},d=r(5708),n={name:"ZShopOrderStatus",components:{zButton:d.Z},props:{statusValue:{type:Number,required:!0},bindedCartItems:{type:Array,required:!0},orderId:{type:Number,required:!0},userId:{type:Number,required:!0},showCheckoutBtn:{type:Boolean,default:!1}},computed:{statuses(){return this.$store.getters["order/orderStatusTypes"]},status(){return this.statuses.find((e=>e.value===this.statusValue))},statusClasses(){return l[this.status.label]}},methods:{openCheckoutDialog(){this.dialog$.show("checkoutOrder",{bindedCartItems:this.bindedCartItems,orderId:this.orderId,userId:this.userId})}}},c=r(3744);const u=(0,c.Z)(n,[["render",o]]);var h=u},6375:function(e,t,r){r.r(t),r.d(t,{default:function(){return B}});var s=r(821);const i={class:"relative"},a={key:0,class:"absolute left-0 top-0 w-full h-full z-140"},o={ref:"scrollableContainer",class:"h-full w-full overflow-y-auto flex flex-col shop-main_padding"},l={class:"mt-3 grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-3 gap-y-5 md:gap-4 2xl:gap-y-8"},d=["onClick"];function n(e,t,r,n,c,u){const h=(0,s.up)("zLoader"),p=(0,s.up)("zPseudoSelect"),f=(0,s.up)("zProfileOrder"),v=(0,s.up)("zDialogNonLayoutWrapper"),m=(0,s.Q2)("observable");return(0,s.wg)(),(0,s.iD)("div",i,[c.loader?((0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(h,{size:"200px",background:"",title:""})])):(0,s.kq)("",!0),(0,s._)("div",o,[(0,s.Wm)(p,{class:"md:w-72",title:"Show",onClick:u.showCategoriesList},{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(c.selectedOrderCategory),1)])),_:1},8,["onClick"]),(0,s._)("div",l,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.orderList,((t,r)=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(f,{key:t.id,order:t,intersected:e.$options.reactiveObserver.schema[r],onOpenOrderDetail:u.openOrderDetail},null,8,["order","intersected","onOpenOrderDetail"])),[[m,r]]))),128))]),(0,s.Wm)(v,{visible:c.categoryListVisibile,"onUpdate:visible":t[0]||(t[0]=e=>c.categoryListVisibile=e),class:"w-screen max-h-72 max-w-md",position:"bottom",title:"Select order category:"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.orderCategories,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:(0,s.C_)(["px-1.5 py-2 md:py-3 cursor-pointer border-b border-placeholder border-dotted last:border-none md:text-lg hover:bg-black-lightest hover:bg-opacity-50",u.getCategoryClasses(e)]),onClick:t=>u.selectCategory(e)},(0,s.zw)(e),11,d)))),128))])),_:1},8,["visible"])],512)])}const c={class:"bg-black-lighten border border-solid border-white rounded-md px-3 py-4"},u={class:"font-mono tracking-widest leading-none"},h={class:"flex w-full relative h-80 xl:h-72 overflow-x-auto select-none"},p={key:0,class:"absolute w-full h-full"},f={class:"flex flex-col items-stretch sm:flex-row sm:items-center justify-between"},v=(0,s.Uk)(" Detail ");function m(e,t,r,i,a,o){const l=(0,s.up)("zDivider"),d=(0,s.up)("zMediaWithTitle"),n=(0,s.up)("zLoader"),m=(0,s.up)("zOrderStatus"),w=(0,s.up)("zButton");return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",null,[(0,s._)("h3",null,(0,s.zw)(r.order.title),1),(0,s._)("h5",u,(0,s.zw)(r.order.id),1)]),(0,s.Wm)(l,{class:"my-3.5"}),(0,s._)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.media,(e=>((0,s.wg)(),(0,s.j4)(d,{ref_for:!0,ref:o.pushMediaToBuffer,key:e.display,title:"A Media of product",class:"mr-2 flex-shrink-0 h-full max-w-full w-auto last:mr-0",original:e.display,preview:e.preview,intersected:r.intersected,"auto-loading":!1,onVnodeMounted:o.createIntersectedWatcher},null,8,["original","preview","intersected","onVnodeMounted"])))),128)),a.loader?((0,s.wg)(),(0,s.iD)("div",p,[(0,s.Wm)(n,{size:"100px"})])):(0,s.kq)("",!0)]),(0,s.Wm)(l,{class:"my-3.5"}),(0,s._)("div",f,[(0,s.Wm)(m,{class:"mb-1.5","status-value":r.order.orderStatus},null,8,["status-value"]),(0,s.Wm)(w,{class:"px-8 py-3",onClick:o.emitOpenOrderDetail},{default:(0,s.w5)((()=>[v])),_:1},8,["onClick"])])])}r(6699);var w=r(6968),b={name:"ZShopProfileOrder",components:{zOrderStatus:w.Z},props:{order:{type:Object,required:!0},intersected:{type:Boolean,defaut:null}},emits:["open-order-detail"],data(){return{media:[],loader:!0}},computed:{productIds(){return this.order.orderItems.reduce(((e,t)=>(null!==t.product&&e.push(t.product),e)),[])}},created(){this.setNonReactiveMediaBuffer(),this.setOrderMedia()},methods:{async setOrderMedia(){await this.$store.dispatch("cart/products/loadProducts",this.productIds);const e=this.$store.getters["cart/products/buffer"];this.media=e.filter((e=>this.productIds.includes(e.id))).reduce(((e,t)=>(t.media.length&&e.push(t.media[0]),e)),[]),this.loader=!1},createIntersectedWatcher(){this.intersectedWatcher||(this.intersectedWatcher=this.$watch("intersected",(e=>{if(e)for(const t of this.mediaBuffer)t.startLoading()}),{immediate:!0,flush:"post"}))},setNonReactiveMediaBuffer(){this.mediaBuffer=[]},emitOpenOrderDetail(){this.$emit("open-order-detail",this.order.id)},pushMediaToBuffer(e){this.mediaBuffer.includes(e)||this.mediaBuffer.push(e)}}},g=r(3744);const y=(0,g.Z)(b,[["render",m]]);var Z=y,k=r(1352);const O=new k.s;var C={name:"ProfileOrderList",reactiveObserver:O,directives:{observable:O.directive},components:{zProfileOrder:Z},data(){return{categoryListVisibile:!1,selectedOrderCategory:"All",orderCategories:["All","Awaiting Payment","In the work","Is made","Sent"],orderList:[],loader:!0}},created(){this.createOrderListWatcher(),this.requestOrders()},beforeUnmount(){this.$options.reactiveObserver.unobserve()},methods:{async requestOrders(){this.orderList=await this.$store.dispatch("order/outFetchOrderList")},createOrderListWatcher(){const e=this.$watch("orderList",(()=>{this.initObserver(),e(),this.loader=!1}),{flush:"post"})},initObserver(){const e=this.$options.reactiveObserver,t=this.$refs.scrollableContainer;e.init(t,"0px 0px 0px 0px"),e.observe()},showCategoriesList(){this.categoryListVisibile=!0},getCategoryClasses(e){return{"text-primary":this.selectedOrderCategory===e}},selectCategory(e){this.categoryListVisibile=!1,this.loader=!0,setTimeout((()=>{this.selectedOrderCategory=e,this.loader=!1}),1500)},openOrderDetail(e){this.$router.push({name:"ShopProfileOrderDetail",params:{orderId:e}})}}};const x=(0,g.Z)(C,[["render",n]]);var B=x}}]);