"use strict";(self["webpackChunktemplate_project"]=self["webpackChunktemplate_project"]||[]).push([[2372],{5852:function(e,r,t){t.d(r,{Z:function(){return m}});var s=t(821);const a={class:"relative"},u={class:"break-words pl-2 mb-1"},i={key:0,class:"absolute text-danger right-2 top-0"};function o(e,r,t,o,l,n){const d=(0,s.up)("zInput");return(0,s.wg)(),(0,s.iD)("label",a,[(0,s._)("h5",u,(0,s.zw)(t.formField),1),(0,s.Wm)(d,(0,s.dG)({"error-state":t.error,"on-error":"Field is required",mask:"9999"},e.$attrs,{size:"sm",type:"text",onInput:n.emitUpdateModelValue}),{"error-label":(0,s.w5)((({errorState:e,onError:r})=>[e?((0,s.wg)(),(0,s.iD)("h5",i,(0,s.zw)(r),1)):(0,s.kq)("",!0)])),_:1},16,["error-state","onInput"])])}var l={name:"MeasureFieldInput",inheritAttrs:!1,props:{formField:{type:String,required:!0},error:{type:Boolean,default:!1}},methods:{emitUpdateModelValue(e){this.$emit("update:modelValue",e.target.value)}}},n=t(3744);const d=(0,n.Z)(l,[["render",o]]);var m=d},9153:function(e,r,t){t.d(r,{Z:function(){return F}});var s=t(821);const a={class:"underline mb-3"},u={class:"grid grid-cols-1 justify-between items-end sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-x-4 md:gap-x-6 gap-y-3"};function i(e,r,t,i,o,l){return(0,s.wg)(),(0,s.iD)("form",{class:"container mx-auto",onSubmit:r[0]||(r[0]=(0,s.iM)(((...e)=>l.submitForm&&l.submitForm(...e)),["stop","prevent"]))},[(0,s._)("h4",a,(0,s.zw)(t.title),1),(0,s._)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.form,((e,r)=>((0,s.wg)(),(0,s.j4)((0,s.LL)(t.measureFieldComponent),{key:r,modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,modelModifiers:{number:!0},"form-field":e.name,error:i.v$[r].$error},null,8,["modelValue","onUpdate:modelValue","form-field","error"])))),128))]),(0,s._)("div",null,[(0,s.WI)(e.$slots,"formActions")])],32)}var o=t(2416),l=t(9373),n=t(5852);const d=e=>{const r=(0,s.Fl)((()=>(0,s.qj)(m(e.formFields,c)))),t=(0,s.Fl)((()=>m(e.formFields,p)));return{form:r,validations:t}},m=(e,r)=>{const t={};for(const s of e)t[s.id]=r(s);return t},c=e=>({value:e.value,id:e.id,name:e.name}),p=()=>({value:{required:l.C1,numeric:l.uR}});var f={name:"MeasureForm",emit:["measureSubmit"],expose:["submitForm"],props:{formFields:{type:Array,required:!0},measureFieldComponent:{type:Object,default:n.Z},title:{type:String,default:""}},setup(e){const{form:r,validations:t}=d(e),s=(0,o.ZP)(t,r);return{v$:s,form:r}},watch:{formFields:{handler(){this.v$.$reset()},flush:"post"}},methods:{submitForm(){this.v$.$reset(),this.v$.$touch(),this.v$.$error||this.$emit("measureSubmit",this.form)}}},v=t(3744);const h=(0,v.Z)(f,[["render",i]]);var F=h},2372:function(e,r,t){t.r(r),t.d(r,{default:function(){return f}});var s=t(821);const a={class:"flex-col shop-main_padding"},u={class:"flex max-w-full overflow-x-auto py-2.5"},i={class:"profile-measures__tab flex justify-center"},o=(0,s.Uk)(" Submit ");function l(e,r,t,l,n,d){const m=(0,s.up)("zTabsNav"),c=(0,s.up)("zDivider"),p=(0,s.up)("zLoaderButton"),f=(0,s.up)("zMeasureForm");return(0,s.wg)(),(0,s.iD)("section",a,[(0,s._)("div",u,[(0,s.Wm)(m,{class:"profile-measures__tab-nav",tabs:d.measures,"model-value":n.activeMeasure,"onUpdate:modelValue":d.changeActiveMeasure},{default:(0,s.w5)((({tab:e})=>[(0,s._)("div",i,(0,s.zw)(e.name),1)])),_:1},8,["tabs","model-value","onUpdate:modelValue"])]),(0,s._)("div",null,[(0,s.Wm)(f,{"form-fields":d.formFields,"measure-field-component":e.$options.components.zMeasureFieldInput,onMeasureSubmit:d.updateMeasureForm},{formActions:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"my-3"}),(0,s.Wm)(p,{class:"w-full sm:w-auto px-16 py-3 float-right",loader:n.loading},{default:(0,s.w5)((()=>[o])),_:1},8,["loader"])])),_:1},8,["form-fields","measure-field-component","onMeasureSubmit"])])])}var n=t(9153),d=t(5852),m={name:"ProfileMeasures",components:{zMeasureForm:n.Z,zMeasureFieldInput:d.Z},data(){return{activeMeasure:null,loading:!1}},computed:{measures(){return this.$store.getters["measure/measures"]},userId(){return this.$store.getters["user/id"]},activeMeasureFields(){return this.activeMeasure.measureFields.map((e=>e.id))},userMeasureFields(){return this.$store.getters["measure/userMeasureFields"](this.activeMeasureFields)},formFields(){return this.activeMeasure.measureFields.map((e=>{const r=this.userMeasureFields.find((r=>r.measureField===e.id)),t=r?r.value:"";return{name:e.name,id:e.id,value:t}}))}},created(){this.setDefaultMeasure()},methods:{changeActiveMeasure(e){this.activeMeasure=e},async updateMeasureForm(e){this.loading=!0,Object.keys(e).forEach((r=>e[r].value=+e[r].value));const r=this.getAPIedMeasureField(e);await this.$store.dispatch("measure/setUserMeasures",r),this.toast$.success({summary:"Measures have been successful updated"}),this.loading=!1},getAPIedMeasureField(e){return Object.entries(e).map((e=>({measureField:parseInt(e[0]),value:e[1].value,user:this.userId})))},setDefaultMeasure(){this.activeMeasure=this.measures[0]}}},c=t(3744);const p=(0,c.Z)(m,[["render",l],["__scopeId","data-v-a987bae8"]]);var f=p}}]);